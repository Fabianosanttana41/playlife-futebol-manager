<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Playlife - Futebol Manager</title>

  <style>
    :root{
      --bg:#0f172a;
      --card:#020617;
      --accent:#22c55e;
      --text:#e5e7eb;
      --muted:#94a3b8;
      --danger:#ef4444;
      --line: rgba(255,255,255,0.08);
      --soft: rgba(255,255,255,0.06);
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: Arial, sans-serif;
      background: linear-gradient(180deg, #020617 0%, #0b1225 55%, #0f172a 100%);
      color: var(--text);
      min-height: 100vh;
    }

    header{
      padding: 16px 20px;
      background: rgba(2,6,23,0.7);
      border-bottom: 1px solid rgba(255,255,255,0.06);
      font-weight: 800;
      letter-spacing: 0.5px;
      color: var(--accent);
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      position: sticky;
      top: 0;
      z-index: 30;
    }
    header .left{
      display:flex;
      align-items:center;
      gap:10px;
    }
    header .ball{font-size:20px}
    header .dev{
      color: rgba(255,255,255,0.80);
      font-weight: 700;
      font-size: 14px;
    }

    /* ===== TELA PRINCIPAL ===== */
    .mainScreen{
      min-height: calc(100vh - 64px);
      display:flex;
      align-items:center;
      justify-content:center;
      padding: 30px 18px;
      position: relative;
      overflow:hidden;
    }
    .mainBg{
      position:absolute;
      inset:0;
      background-image: url("./assets/bg_main.jpg");
      background-size: cover;
      background-position: center;
      filter: blur(10px) brightness(0.55);
      transform: scale(1.08);
      z-index:0;
    }
    .mainOverlay{
      position:absolute;
      inset:0;
      background: radial-gradient(circle at 20% 10%, rgba(34,197,94,0.12), transparent 55%),
                  radial-gradient(circle at 80% 60%, rgba(59,130,246,0.10), transparent 50%),
                  rgba(0,0,0,0.25);
      z-index:1;
    }
    .mainCard{
      width: min(920px, 98vw);
      padding: 26px;
      border-radius: 22px;
      border: 1px solid rgba(255,255,255,0.10);
      background: rgba(2,6,23,0.78);
      backdrop-filter: blur(10px);
      box-shadow: 0 35px 100px rgba(0,0,0,0.55);
      position: relative;
      z-index:2;
    }
    .mainTitle{
      font-size: 52px;
      margin: 0;
      font-weight: 1000;
      letter-spacing: 1px;
    }
    .mainSub{
      margin-top: 10px;
      color: rgba(255,255,255,0.72);
      font-size: 15px;
      line-height: 1.5;
    }
    .btnBig{
      margin-top: 22px;
      display:inline-flex;
      align-items:center;
      gap:10px;
      padding: 14px 18px;
      border-radius: 16px;
      font-weight: 1000;
      background: var(--accent);
      color:#001b0a;
      border:none;
      cursor:pointer;
      transition:0.2s;
      font-size: 16px;
    }
    .btnBig:hover{filter: brightness(1.07)}

    /* ===== LAYOUT GERAL ===== */
    .page{
      max-width: 1200px;
      margin: 0 auto;
      padding: 24px;
      display:flex;
      justify-content:center;
    }
    .panel{
      width: 100%;
      max-width: 980px;
      display:flex;
      flex-direction:column;
      gap: 16px;
    }
    .card{
      background: rgba(2,6,23,0.75);
      border: 1px solid rgba(255,255,255,0.06);
      box-shadow: 0 20px 60px rgba(0,0,0,0.35);
      border-radius: 18px;
      padding: 18px;
    }
    .row{
      display:flex;
      gap:12px;
      align-items:center;
      flex-wrap: wrap;
    }
    select, button, input{
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,0.12);
      background: rgba(255,255,255,0.06);
      color: var(--text);
      padding: 11px 12px;
      outline:none;
    }
    input{ width: 240px; }
    button{
      cursor:pointer;
      background: var(--accent);
      color:#001b0a;
      font-weight: 1000;
      border: none;
      padding: 11px 14px;
      transition: 0.2s;
    }
    button:hover{filter: brightness(1.05)}
    button.secondary{
      background: rgba(255,255,255,0.08);
      color: var(--text);
      border: 1px solid rgba(255,255,255,0.12);
    }
    button.ghost{
      background: transparent;
      color: var(--text);
      border: 1px solid rgba(255,255,255,0.12);
    }
    button:disabled{opacity:.65; cursor:not-allowed;}
    .status{ margin-top: 8px; font-size: 13px; color: var(--muted); }
    .pill{
      display:inline-flex;
      align-items:center;
      gap:8px;
      border:1px solid rgba(255,255,255,0.12);
      background: rgba(255,255,255,0.05);
      padding: 7px 10px;
      border-radius: 999px;
      font-size: 13px;
      color: var(--text);
    }
    .muted{color: var(--muted)}

    /* ===== Clube header ===== */
    .clubHeader{
      display:grid;
      grid-template-columns: 120px 1fr 240px;
      gap:16px;
      align-items:center;
    }
    @media (max-width: 900px){
      .clubHeader{ grid-template-columns: 90px 1fr; }
      .kitBox{ display:none; }
      input{width: 100%;}
    }
    .logoBig{
      width: 110px;
      height: 110px;
      border-radius: 18px;
      padding: 12px;
      object-fit: contain;
      border:1px solid rgba(255,255,255,0.10);
      background: rgba(255,255,255,0.06);
    }
    .clubName{
      font-size: 34px;
      font-weight: 1000;
      margin: 0 0 6px 0;
      line-height: 1.05;
    }
    .kitBox{
      justify-self:end;
      width: 220px;
      height: 220px;
      border-radius: 18px;
      border:1px solid rgba(255,255,255,0.10);
      background: rgba(255,255,255,0.04);
      display:flex;
      align-items:center;
      justify-content:center;
      position: relative;
      overflow:hidden;
    }
    .kitBox img{
      width: 92%;
      height: 92%;
      object-fit: contain;
      filter: drop-shadow(0 16px 22px rgba(0,0,0,0.45));
    }
    .kitHint{
      position:absolute;
      bottom:10px;
      left:10px;
      font-size: 12px;
      color: rgba(255,255,255,0.75);
      background: rgba(0,0,0,0.35);
      border: 1px solid rgba(255,255,255,0.08);
      padding: 6px 10px;
      border-radius: 999px;
      backdrop-filter: blur(6px);
    }

    /* ===== toolbar / filtros ===== */
    .toolbar{
      display:flex;
      justify-content:space-between;
      gap:12px;
      flex-wrap:wrap;
      align-items:center;
      padding: 12px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,0.06);
      background: rgba(0,0,0,0.15);
    }
    .segmented{
      display:flex;
      gap:8px;
      flex-wrap:wrap;
      align-items:center;
    }
    .segmented button{
      padding: 8px 12px;
      border-radius: 999px;
      font-weight: 1000;
      border: 1px solid rgba(255,255,255,0.12);
      background: rgba(255,255,255,0.06);
      color: var(--text);
    }
    .segmented button.active{
      background: var(--accent);
      color:#001b0a;
      border: none;
    }

    /* ===== jogadores ===== */
    .playersGrid{
      display:grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 12px;
    }
    @media (max-width: 980px){ .playersGrid{grid-template-columns: repeat(3, 1fr);} }
    @media (max-width: 720px){ .playersGrid{grid-template-columns: repeat(2, 1fr);} }

    .playerCard{
      cursor:pointer;
      padding: 12px;
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,0.08);
      background: rgba(0,0,0,0.22);
      transition: transform 0.12s ease, border-color 0.12s ease;
      display:flex;
      flex-direction:column;
      gap:8px;
      min-height: 124px;
    }
    .playerCard:hover{
      transform: translateY(-2px);
      border-color: rgba(255,255,255,0.18);
    }
    .pcTop{display:flex; justify-content:space-between; align-items:flex-start; gap:10px;}
    .pcName{font-weight: 1000; line-height: 1.15; font-size: 14px;}
    .pcPos{font-size: 12px; color: var(--muted); margin-top: 2px; display:flex; align-items:center; gap:8px;}
    .flag{
      width: 18px;
      height: 18px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.12);
      object-fit: cover;
      background: rgba(255,255,255,0.06);
    }
    .pcForce{
      font-weight: 1000;
      font-size: 13px;
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.10);
      background: rgba(255,255,255,0.06);
      min-width: 40px;
      text-align:center;
    }
    .pcFooter{display:flex; justify-content:space-between; align-items:center; gap:8px; margin-top:auto;}
    .tag{
      font-size: 12px;
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.10);
      background: rgba(255,255,255,0.05);
      color: rgba(255,255,255,0.86);
      max-width: 100%;
      overflow:hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }

    /* ===== modal atleta ===== */
    .modalOverlay{
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.65);
      display:none;
      align-items:center;
      justify-content:center;
      padding: 16px;
      z-index: 60;
    }
    .modal{
      width: min(900px, 98vw);
      border-radius: 22px;
      border: 1px solid rgba(255,255,255,0.10);
      background: rgba(2,6,23,0.92);
      box-shadow: 0 30px 90px rgba(0,0,0,0.55);
      overflow:hidden;
    }
    .modalHeader{
      display:flex;
      justify-content:space-between;
      align-items:center;
      padding: 16px 18px;
      border-bottom: 1px solid rgba(255,255,255,0.08);
      background: rgba(255,255,255,0.03);
    }
    .modalTitle{font-size: 18px; font-weight: 1000;}
    .modalBody{
      padding: 18px;
      display:grid;
      grid-template-columns: 260px 1fr;
      gap: 16px;
    }
    @media (max-width: 760px){ .modalBody{grid-template-columns: 1fr;} }
    .avatar{
      width: 100%;
      border-radius: 22px;
      border: 1px solid rgba(255,255,255,0.10);
      background: linear-gradient(180deg, rgba(255,255,255,0.08), rgba(0,0,0,0.08));
      padding: 16px;
      min-height: 240px;
      display:flex;
      flex-direction:column;
      justify-content:space-between;
      gap: 12px;
    }
    .bigRate{
      font-size: 34px;
      font-weight: 1000;
      padding: 10px 16px;
      border-radius: 18px;
      background: rgba(255,255,255,0.06);
      border: 1px solid rgba(255,255,255,0.10);
      text-align:center;
      min-width: 86px;
    }
    .pName{font-size: 20px; font-weight: 1000; line-height:1.05;}
    .pMeta{color: var(--muted); font-size: 13px;}
    .attrBox{
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,0.08);
      background: rgba(0,0,0,0.22);
      padding: 14px;
    }
    .attrTitle{font-size: 14px; font-weight: 900; margin-bottom: 10px; color: rgba(255,255,255,0.90);}
    .attrRow{
      display:grid;
      grid-template-columns: 120px 1fr 50px;
      gap: 10px;
      align-items:center;
      margin-bottom: 9px;
      font-size: 13px;
    }
    .bar{
      height: 10px;
      background: rgba(255,255,255,0.08);
      border-radius: 999px;
      overflow:hidden;
      border: 1px solid rgba(255,255,255,0.06);
    }
    .fill{height: 100%; width: 0%; transition: width 0.45s ease;}

    /* ===== CONFRONTO AO VIVO ===== */
    .topMatch{display:flex; justify-content:space-between; align-items:center; gap:14px; flex-wrap:wrap;}
    .teamBox{display:flex; align-items:center; gap:12px; min-width: 240px;}
    .teamBox img{
      width: 44px; height: 44px; border-radius: 14px;
      border: 1px solid rgba(255,255,255,0.12);
      background: rgba(255,255,255,0.06);
      object-fit: contain; padding: 6px;
    }
    .teamBox .nm{font-weight: 1000;}
    .scoreBig{font-size: 40px; font-weight: 1000; letter-spacing:1px; min-width: 160px; text-align:center;}
    .clock{font-size: 14px; color: rgba(255,255,255,0.75); text-align:center; margin-top: 3px;}

    .matchGrid{display:grid; grid-template-columns: 1.3fr 0.9fr; gap: 16px; align-items:start;}
    @media (max-width: 980px){ .matchGrid{grid-template-columns: 1fr;} }

    .pitch{
      height: 520px;
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,0.10);
      position: relative;
      overflow:hidden;
      background:
        radial-gradient(circle at 40% 20%, rgba(34,197,94,0.10), transparent 48%),
        linear-gradient(180deg, rgba(0,0,0,0.2), rgba(0,0,0,0.30));
    }
    .pitch::before{
      content:"";
      position:absolute;
      inset:0;
      background-image:
        linear-gradient(to right, rgba(255,255,255,0.06) 1px, transparent 1px),
        linear-gradient(to bottom, rgba(255,255,255,0.06) 1px, transparent 1px);
      background-size: 60px 60px;
      opacity: 0.25;
      pointer-events:none;
    }
    .midCircle{
      position:absolute;
      top:50%;
      left:50%;
      width:140px;
      height:140px;
      transform: translate(-50%,-50%);
      border-radius:999px;
      border: 2px solid rgba(255,255,255,0.09);
    }
    .centerLine{
      position:absolute;
      left:0; right:0;
      top:50%;
      height:2px;
      background: rgba(255,255,255,0.09);
    }
    .playersOnPitch{position:absolute; inset:0; padding: 10px; display:grid; grid-template-rows: 1fr 1fr; gap: 10px;}
    .half{position:relative; border-radius: 16px; border: 1px solid rgba(255,255,255,0.06); background: rgba(0,0,0,0.08); overflow:hidden;}
    .halfTitle{position:absolute; top:10px; left:12px; font-size: 12px; color: rgba(255,255,255,0.72); font-weight: 900;}
    .pRow{position:absolute; left:0; right:0; top:36px; bottom:12px; display:flex; align-items:center; justify-content:space-around; gap:6px; padding: 0 10px; flex-wrap:wrap;}
    .dot{
      width: 86px; height: 34px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.10);
      background: rgba(0,0,0,0.22);
      display:flex; align-items:center; justify-content:center;
      font-size: 12px; font-weight: 900;
      color: rgba(255,255,255,0.90);
      padding: 0 10px;
      overflow:hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }

    .sidePanel{display:flex; flex-direction:column; gap: 12px;}
    .listBox{
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,0.08);
      background: rgba(0,0,0,0.18);
      padding: 14px;
    }
    .listBox h3{margin:0 0 10px 0; font-size: 18px; font-weight: 1000;}
    .smallNote{color: rgba(255,255,255,0.72); font-size: 12px; line-height:1.4; margin-top:-6px; margin-bottom: 10px;}
    .lineup{display:grid; grid-template-columns: 1fr 1fr; gap: 10px;}
    .lineupCol{
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,0.06);
      padding: 10px;
      background: rgba(255,255,255,0.03);
    }
    .lineupCol b{font-size: 13px; display:block; margin-bottom: 8px;}
    .li{
      font-size: 12px;
      color: rgba(255,255,255,0.85);
      padding: 6px 8px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,0.06);
      background: rgba(0,0,0,0.18);
      margin-bottom: 6px;
    }
    .sumula{max-height: 270px; overflow:auto; padding-right: 6px;}
    .ev{
      font-size: 12px;
      padding: 8px 10px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,0.06);
      background: rgba(0,0,0,0.22);
      margin-bottom: 8px;
    }
    .ev b{ color: var(--accent); }

    /* ===== TACTIC ACTIVE ===== */
    .tacActive{
      background: var(--accent) !important;
      color: #001b0a !important;
      border: none !important;
    }
  </style>
</head>

<body>
<header>
  <div class="left">
    <span class="ball">‚öΩ</span>
    <span style="font-size:20px; font-weight:1000;">Playlife</span>
  </div>
  <div class="dev">Desenvolvedor: Fabiano Santos</div>
</header>

<!-- ===================== TELA PRINCIPAL ===================== -->
<section id="screenMain" class="mainScreen">
  <div class="mainBg"></div>
  <div class="mainOverlay"></div>

  <div class="mainCard">
    <h1 class="mainTitle">PLAYLIFE</h1>
    <div class="mainSub">
      Seu modo carreira no futebol. Escolha seu clube, escale o time,
      enfrente rivais e construa campeonatos completos.
    </div>

    <button class="btnBig" id="btnEntrar">‚ñ∂ Entrar no jogo</button>
  </div>
</section>

<!-- ===================== TELA DO CLUBE ===================== -->
<section id="screenClube" style="display:none;">
  <div class="page">
    <div class="panel">

      <div class="card">
        <h2 style="margin:0 0 10px 0; font-size:30px;">Escolha seu clube</h2>
        <div class="row">
          <select id="ligaSelect"></select>
          <select id="timeSelect"></select>
          <button id="btnCarregar">Carregar Clube</button>
          <button id="btnIrConfronto" class="secondary">‚öî Confronto</button>
        </div>
        <div class="status" id="statusMsg">Aguardando...</div>
      </div>

      <div class="card">
        <div class="clubHeader">
          <img id="logoClube" class="logoBig" src="" alt="logo do clube"/>

          <div>
            <div class="clubName" id="clubeNome">‚Äî</div>
            <div class="row">
              <span class="pill"><b>T√©cnico:</b> <span id="tecnicoNome" class="muted">‚Äî</span></span>
              <span class="pill"><b>For√ßa m√©dia:</b> <span id="forcaMedia" class="muted">‚Äî</span></span>
              <span class="pill"><b>Elenco:</b> <span id="totalElenco" class="muted">‚Äî</span></span>
            </div>
            <div style="height:10px"></div>
            <div class="muted" style="font-size:12px;">Clique em um jogador para ver detalhes.</div>
          </div>

          <div class="kitBox">
            <img id="kitClube" src="" alt="uniforme"/>
            <div class="kitHint">Uniforme (home)</div>
          </div>
        </div>
      </div>

      <div class="toolbar">
        <div class="segmented" id="filtrosPosicao">
          <button data-pos="ALL" class="active">Todos</button>
          <button data-pos="GOL">GOL</button>
          <button data-pos="DEF">DEF</button>
          <button data-pos="MEI">MEI</button>
          <button data-pos="ATA">ATA</button>
        </div>

        <div class="row">
          <input id="buscaJogador" placeholder="Buscar jogador..." />
          <button id="btnLimparBusca" class="ghost">Limpar</button>
        </div>
      </div>

      <div class="card">
        <div class="row" style="justify-content:space-between;">
          <div style="font-size:20px;font-weight:1000;">Elenco Completo</div>
          <div class="muted" id="contadorJogadores">0 jogadores</div>
        </div>

        <div style="height:12px"></div>
        <div class="playersGrid" id="playersGrid"></div>
      </div>

    </div>
  </div>
</section>

<!-- ===================== TELA CONFRONTO AO VIVO ===================== -->
<section id="screenConfronto" style="display:none;">
  <div class="page">
    <div class="panel">

      <div class="row" style="justify-content:space-between;">
        <h2 style="margin:0;">Confronto (Ao vivo)</h2>
        <button id="btnVoltarClube" class="secondary">‚¨Ö Voltar</button>
      </div>

      <div class="card">
        <div class="row" style="justify-content:space-between; align-items:flex-end;">
          <div>
            <div class="muted" style="font-size:13px;">Liga</div>
            <div style="font-weight:1000;" id="confrontoLiga">‚Äî</div>
          </div>

          <div class="row">
            <select id="confrontoAdvTime"></select>
            <button id="btnIniciarLive">Carregar confronto</button>
          </div>
        </div>

        <div class="status muted" style="margin-top:10px;">
          Simula√ß√£o: <b>90 minutos</b> (2 tempos) ‚Ä¢ cada tempo dura <b>6 segundos</b> (total 12s)
        </div>
      </div>

      <div class="card">
        <div class="topMatch">
          <div class="teamBox">
            <img id="logoMandante" src="" alt="logo mandante"/>
            <div>
              <div class="muted" style="font-size:12px;">Seu clube</div>
              <div class="nm" id="nomeMandante">‚Äî</div>
            </div>
          </div>

          <div style="text-align:center;">
            <div class="scoreBig" id="placarLive">0 x 0</div>
            <div class="clock" id="clockLive">00:00 ‚Ä¢ 1¬∫ tempo</div>
          </div>

          <div class="teamBox" style="justify-content:flex-end;">
            <div style="text-align:right;">
              <div class="muted" style="font-size:12px;">Advers√°rio</div>
              <div class="nm" id="nomeVisitante">‚Äî</div>
            </div>
            <img id="logoVisitante" src="" alt="logo visitante"/>
          </div>
        </div>
      </div>

      <!-- ‚úÖ T√ÅTICA AO VIVO -->
      <div class="card">
        <div class="row" style="justify-content:space-between;">
          <div>
            <div style="font-weight:1000; font-size:18px;">üéÆ T√°tica Ao Vivo</div>
            <div class="muted" style="font-size:12px; margin-top:4px;">
              90 minutos simulados ‚Ä¢ 2 tempos (45+45) ‚Ä¢ cada tempo dura 6 segundos
            </div>
          </div>

          <div class="pill">
            <b>T√°tica:</b>
            <span id="tacticLabel" class="muted">Equilibrado</span>
          </div>
        </div>

        <div style="height:12px;"></div>

        <div class="row">
          <button id="tacDef" class="secondary">üõ°Ô∏è Defender</button>
          <button id="tacEq" class="secondary">‚öñÔ∏è Equilibrado</button>
          <button id="tacAtk">üî• Atacar</button>

          <button id="btnStart12s" style="margin-left:auto;">‚è±Ô∏è Iniciar partida (12s)</button>
        </div>

        <div class="status muted" style="margin-top:10px;">
          Atacar aumenta chance de gol mas aumenta chance de sofrer contra-ataque.
        </div>
      </div>

      <div class="matchGrid">
        <div class="pitch">
          <div class="centerLine"></div>
          <div class="midCircle"></div>

          <div class="playersOnPitch">
            <div class="half">
              <div class="halfTitle" id="halfTopTitle">Mandante</div>
              <div class="pRow" id="pitchMandante"></div>
            </div>

            <div class="half">
              <div class="halfTitle" id="halfBottomTitle">Visitante</div>
              <div class="pRow" id="pitchVisitante"></div>
            </div>
          </div>
        </div>

        <div class="sidePanel">
          <div class="listBox">
            <h3>Escala√ß√µes</h3>
            <div class="smallNote">Os 11 melhores dispon√≠veis (sem les√£o) entram como titulares.</div>

            <div class="lineup">
              <div class="lineupCol">
                <b id="lineupTitleM">‚Äî</b>
                <div id="lineupMandante"></div>
              </div>
              <div class="lineupCol">
                <b id="lineupTitleV">‚Äî</b>
                <div id="lineupVisitante"></div>
              </div>
            </div>
          </div>

          <div class="listBox">
            <h3>S√∫mula</h3>
            <div class="smallNote">Eventos em tempo real conforme o cron√¥metro passa.</div>
            <div class="sumula" id="sumulaBox">
              <div class="muted">Aguardando in√≠cio da partida...</div>
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>
</section>

<!-- ===================== MODAL ATLETA ===================== -->
<div id="modalOverlay" class="modalOverlay">
  <div class="modal">
    <div class="modalHeader">
      <div class="modalTitle">Card do Atleta</div>
      <button id="btnFecharModal" class="secondary">‚úñ</button>
    </div>

    <div class="modalBody">
      <div class="avatar">
        <div style="display:flex; justify-content:space-between; align-items:flex-start; gap:12px;">
          <div>
            <div class="pName" id="mNome">‚Äî</div>
            <div class="pMeta" id="mMeta">‚Äî</div>
            <div class="row" style="margin-top:10px;">
              <img id="mFlag" class="flag" src="" alt="bandeira"/>
              <span class="pill"><b>Pos:</b> <span id="mPos" class="muted">‚Äî</span></span>
              <span class="pill"><b>P√©:</b> <span id="mPe" class="muted">‚Äî</span></span>
            </div>
          </div>
          <div class="bigRate" id="mForca">‚Äî</div>
        </div>

        <div>
          <div class="row">
            <span class="pill"><b>Idade:</b> <span id="mIdade" class="muted">‚Äî</span></span>
            <span class="pill"><b>Altura:</b> <span id="mAltura" class="muted">‚Äî</span></span>
            <span class="pill"><b>Status:</b> <span id="mLesao" class="muted">‚Äî</span></span>
          </div>
          <div style="height:10px"></div>
          <div class="pill" style="display:flex; justify-content:space-between; width:100%;">
            <b>Estilo:</b>
            <span id="mEstilo" class="muted">‚Äî</span>
          </div>
        </div>
      </div>

      <div class="attrBox">
        <div class="attrTitle">Atributos</div>

        <div class="attrRow"><div class="muted">Velocidade</div><div class="bar"><div id="aVel" class="fill"></div></div><div id="tVel" style="font-weight:1000;text-align:right;">‚Äî</div></div>
        <div class="attrRow"><div class="muted">Finaliza√ß√£o</div><div class="bar"><div id="aFin" class="fill"></div></div><div id="tFin" style="font-weight:1000;text-align:right;">‚Äî</div></div>
        <div class="attrRow"><div class="muted">Passe</div><div class="bar"><div id="aPas" class="fill"></div></div><div id="tPas" style="font-weight:1000;text-align:right;">‚Äî</div></div>
        <div class="attrRow"><div class="muted">Marca√ß√£o</div><div class="bar"><div id="aMar" class="fill"></div></div><div id="tMar" style="font-weight:1000;text-align:right;">‚Äî</div></div>
        <div class="attrRow"><div class="muted">F√≠sico</div><div class="bar"><div id="aFis" class="fill"></div></div><div id="tFis" style="font-weight:1000;text-align:right;">‚Äî</div></div>

        <div style="height:10px"></div>
        <div class="muted" style="font-size:12px;">* Se o backend enviar atributos reais, eles aparecem aqui.</div>
      </div>
    </div>
  </div>
</div>

<!-- ==========================================================
  SCRIPT PRINCIPAL (apenas UI + API do Clube/Confronto)
  O motor 12s est√° em: ./js/confronto_live.js
========================================================== -->
<script type="module">
  import { API, apiGet } from "./js/api.js";

  // =============== SCREENS ===============
  const screenMain = document.getElementById("screenMain");
  const screenClube = document.getElementById("screenClube");
  const screenConfronto = document.getElementById("screenConfronto");

  function showScreen(name){
    screenMain.style.display = (name==="main") ? "flex" : "none";
    screenClube.style.display = (name==="clube") ? "block" : "none";
    screenConfronto.style.display = (name==="confronto") ? "block" : "none";
  }

  // =============== ELEMENTOS CLUBE ===============
  const btnEntrar = document.getElementById("btnEntrar");
  const ligaSelect = document.getElementById("ligaSelect");
  const timeSelect = document.getElementById("timeSelect");
  const btnCarregar = document.getElementById("btnCarregar");
  const btnIrConfronto = document.getElementById("btnIrConfronto");

  const statusMsg = document.getElementById("statusMsg");
  const clubeNome = document.getElementById("clubeNome");
  const tecnicoNome = document.getElementById("tecnicoNome");
  const forcaMedia = document.getElementById("forcaMedia");
  const totalElenco = document.getElementById("totalElenco");
  const logoClube = document.getElementById("logoClube");
  const kitClube = document.getElementById("kitClube");

  const buscaJogador = document.getElementById("buscaJogador");
  const btnLimparBusca = document.getElementById("btnLimparBusca");
  const playersGrid = document.getElementById("playersGrid");
  const contadorJogadores = document.getElementById("contadorJogadores");
  const filtrosPosicao = document.getElementById("filtrosPosicao");

  // =============== ELEMENTOS CONFRONTO ===============
  const btnVoltarClube = document.getElementById("btnVoltarClube");
  const confrontoLiga = document.getElementById("confrontoLiga");
  const confrontoAdvTime = document.getElementById("confrontoAdvTime");
  const btnIniciarLive = document.getElementById("btnIniciarLive");

  const logoMandante = document.getElementById("logoMandante");
  const logoVisitante = document.getElementById("logoVisitante");
  const nomeMandante = document.getElementById("nomeMandante");
  const nomeVisitante = document.getElementById("nomeVisitante");

  const lineupMandante = document.getElementById("lineupMandante");
  const lineupVisitante = document.getElementById("lineupVisitante");
  const lineupTitleM = document.getElementById("lineupTitleM");
  const lineupTitleV = document.getElementById("lineupTitleV");

  const pitchMandante = document.getElementById("pitchMandante");
  const pitchVisitante = document.getElementById("pitchVisitante");
  const halfTopTitle = document.getElementById("halfTopTitle");
  const halfBottomTitle = document.getElementById("halfBottomTitle");

  // =============== MODAL ATLETA ===============
  const modalOverlay = document.getElementById("modalOverlay");
  const btnFecharModal = document.getElementById("btnFecharModal");

  const mNome = document.getElementById("mNome");
  const mMeta = document.getElementById("mMeta");
  const mForca = document.getElementById("mForca");
  const mPos = document.getElementById("mPos");
  const mPe = document.getElementById("mPe");
  const mIdade = document.getElementById("mIdade");
  const mAltura = document.getElementById("mAltura");
  const mLesao = document.getElementById("mLesao");
  const mEstilo = document.getElementById("mEstilo");
  const mFlag = document.getElementById("mFlag");

  const aVel = document.getElementById("aVel");
  const aFin = document.getElementById("aFin");
  const aPas = document.getElementById("aPas");
  const aMar = document.getElementById("aMar");
  const aFis = document.getElementById("aFis");

  const tVel = document.getElementById("tVel");
  const tFin = document.getElementById("tFin");
  const tPas = document.getElementById("tPas");
  const tMar = document.getElementById("tMar");
  const tFis = document.getElementById("tFis");

  // =============== ESTADO ===============
  let estado = {
    liga: null,
    meuTime: null,
    dadosMeuTime: null,
    filtroPos: "ALL",
    busca: "",
  };

  function setStatus(msg, ok=true) {
    statusMsg.textContent = msg;
    statusMsg.style.color = ok ? "#39d353" : "#ff6b6b";
  }

  function limparSelect(sel) { sel.innerHTML = ""; }
  function addOption(sel, label, value) {
    const op = document.createElement("option");
    op.textContent = label;
    op.value = value;
    sel.appendChild(op);
  }

  function calcularForcaMedia(elenco) {
    if (!elenco || elenco.length === 0) return "0.0";
    const soma = elenco.reduce((a, j) => a + (j.forca || 0), 0);
    return (soma / elenco.length).toFixed(1);
  }

  function pathLogo(logoFile){ return `./assets/logos/${logoFile}`; }
  function pathFlag(sigla){ return `./assets/flags/${(sigla||"").toLowerCase()}.png`; }
  function pathKitFromBackend(dadosTime){
    const u = dadosTime?.uniforme_home;
    if(u) return `./assets/kits/${u}`;
    return `./assets/kits/${(dadosTime?.nome||"default").toLowerCase()}.png`;
  }

  function kitFallback(el){
    el.src = "";
    el.alt = "Sem uniforme";
    el.style.opacity = "0.55";
    el.parentElement.style.background = "rgba(255,255,255,0.03)";
    el.parentElement.style.border = "1px dashed rgba(255,255,255,0.18)";
    el.parentElement.querySelector(".kitHint").textContent = "Sem uniforme (adicione PNG)";
  }

  function clamp(v, min, max){ return Math.max(min, Math.min(max, v)); }

  function gerarEstilo(j){
    const p = j.posicao;
    if (p === "GOL") return "Muralha / Reflexo";
    if (p === "DEF") return (j.forca >= 80 ? "Zagueiro de elite" : "Marcador firme");
    if (p === "MEI") return (j.forca >= 82 ? "Armador" : "Meia de liga√ß√£o");
    if (p === "ATA") return (j.forca >= 82 ? "Finalizador" : "Atacante m√≥vel");
    return "Vers√°til";
  }

  function calcAttr(j){
    const a = j.atributos || {};
    return {
      vel: clamp(a.velocidade ?? j.forca ?? 70, 40, 99),
      fin: clamp(a.finalizacao ?? j.forca ?? 70, 40, 99),
      pas: clamp(a.passe ?? j.forca ?? 70, 40, 99),
      mar: clamp(a.marcacao ?? j.forca ?? 70, 40, 99),
      fis: clamp(a.fisico ?? j.forca ?? 70, 40, 99),
    };
  }

  function aplicarBarra(el, value, color){
    el.style.width = `${value}%`;
    el.style.background = color || "#22c55e";
  }

  // ===================== LOAD LIGAS/TIMES =====================
  async function carregarLigas() {
    try {
      setStatus("Carregando ligas...");
      const ligas = await apiGet(`${API}/ligas`);
      limparSelect(ligaSelect);
      ligas.forEach(l => addOption(ligaSelect, l, l));
      estado.liga = ligaSelect.value;
      setStatus("Ligas carregadas!");
      await carregarTimes();
    } catch (e) {
      setStatus("Falha ao carregar ligas: " + e.message, false);
    }
  }

  async function carregarTimes() {
    try {
      estado.liga = ligaSelect.value;
      setStatus("Carregando times...");
      const times = await apiGet(`${API}/times/${encodeURIComponent(estado.liga)}`);
      limparSelect(timeSelect);
      times.forEach(t => addOption(timeSelect, t.nome, t.nome));
      setStatus("Times carregados!");
    } catch (e) {
      setStatus("Falha ao carregar times: " + e.message, false);
    }
  }

  async function carregarClube() {
    try {
      const liga = ligaSelect.value;
      const time = timeSelect.value;

      setStatus("Buscando dados do clube...");
      const dados = await apiGet(`${API}/time/${encodeURIComponent(liga)}/${encodeURIComponent(time)}`);

      estado.liga = liga;
      estado.meuTime = time;
      estado.dadosMeuTime = dados;

      clubeNome.textContent = dados.nome;
      tecnicoNome.textContent = dados.tecnico?.nome || "‚Äî";
      forcaMedia.textContent = calcularForcaMedia(dados.elenco);
      totalElenco.textContent = String(dados.elenco?.length || 0);

      logoClube.src = pathLogo(dados.logo || "");
      logoClube.onerror = () => {
        logoClube.src = "";
        logoClube.alt = "Sem logo";
        logoClube.style.opacity = "0.55";
      };
      logoClube.style.opacity = "1";

      kitClube.style.opacity = "1";
      kitClube.parentElement.style.border = "1px solid rgba(255,255,255,0.10)";
      kitClube.parentElement.style.background = "rgba(255,255,255,0.04)";
      kitClube.parentElement.querySelector(".kitHint").textContent = "Uniforme (home)";
      kitClube.src = pathKitFromBackend(dados);
      kitClube.onerror = () => kitFallback(kitClube);

      estado.filtroPos = "ALL";
      estado.busca = "";
      buscaJogador.value = "";
      ativarBotaoFiltro("ALL");

      setStatus("‚úÖ Clube carregado!");
      renderElenco();
    } catch (e) {
      setStatus("Erro ao carregar clube: " + e.message, false);
    }
  }

  function ativarBotaoFiltro(pos){
    const botoes = filtrosPosicao.querySelectorAll("button");
    botoes.forEach(b => b.classList.toggle("active", b.dataset.pos === pos));
  }

  function renderElenco(){
    const dados = estado.dadosMeuTime;
    if (!dados || !dados.elenco) return;

    const busca = (estado.busca || "").trim().toLowerCase();
    const pos = estado.filtroPos;

    let lista = [...dados.elenco];
    if (pos !== "ALL") lista = lista.filter(j => j.posicao === pos);
    if (busca.length > 0) lista = lista.filter(j => (j.nome || "").toLowerCase().includes(busca));
    lista.sort((a,b)=> (b.forca||0) - (a.forca||0));

    contadorJogadores.textContent = `${lista.length} jogador(es)`;
    playersGrid.innerHTML = "";

    lista.forEach(j => {
      const card = document.createElement("div");
      card.className = "playerCard";

      const flag = pathFlag(j.nacionalidade || "");
      card.innerHTML = `
        <div class="pcTop">
          <div style="min-width:0">
            <div class="pcName">${j.nome}</div>
            <div class="pcPos">
              <img class="flag" src="${flag}" onerror="this.style.display='none'" alt="flag"/>
              ${j.posicao} ‚Ä¢ ${(j.nacionalidade || "‚Äî").toUpperCase()}
            </div>
          </div>
          <div class="pcForce">${j.forca}</div>
        </div>
        <div class="pcFooter">
          <div class="tag">${gerarEstilo(j)}</div>
          <div class="tag" style="${j.lesao ? "border-color: rgba(239,68,68,0.35); background: rgba(239,68,68,0.10)" : ""}">
            ${j.lesao ? "ü§ï Les√£o" : "‚úÖ Ok"}
          </div>
        </div>
      `;

      card.addEventListener("click", () => abrirModalJogador(j));
      playersGrid.appendChild(card);
    });

    if (lista.length === 0){
      playersGrid.innerHTML = `<div class="muted">Nenhum jogador encontrado.</div>`;
    }
  }

  function abrirModalJogador(j){
    modalOverlay.style.display = "flex";

    mNome.textContent = j.nome;
    mMeta.textContent = `${estado.meuTime} ‚Ä¢ ${estado.liga}`;
    mForca.textContent = j.forca;
    mPos.textContent = j.posicao;
    mPe.textContent = (j.pe || "‚Äî").toUpperCase();

    mIdade.textContent = (j.idade != null) ? `${j.idade} anos` : "‚Äî";
    mAltura.textContent = (j.altura != null) ? `${j.altura} m` : "‚Äî";

    mLesao.textContent = j.lesao ? "Lesionado" : "Dispon√≠vel";
    mEstilo.textContent = gerarEstilo(j);

    mFlag.src = pathFlag(j.nacionalidade || "");
    mFlag.onerror = () => { mFlag.style.display = "none"; };
    mFlag.style.display = "inline-block";

    const attrs = calcAttr(j);
    const cor = (estado.dadosMeuTime?.cor || "#22c55e");

    tVel.textContent = attrs.vel; aplicarBarra(aVel, attrs.vel, cor);
    tFin.textContent = attrs.fin; aplicarBarra(aFin, attrs.fin, cor);
    tPas.textContent = attrs.pas; aplicarBarra(aPas, attrs.pas, cor);
    tMar.textContent = attrs.mar; aplicarBarra(aMar, attrs.mar, cor);
    tFis.textContent = attrs.fis; aplicarBarra(aFis, attrs.fis, cor);
  }

  function fecharModal(){ modalOverlay.style.display = "none"; }
  btnFecharModal.addEventListener("click", fecharModal);
  modalOverlay.addEventListener("click", (e) => { if (e.target === modalOverlay) fecharModal(); });
  window.addEventListener("keydown", (e) => { if (e.key === "Escape") fecharModal(); });

  // =============== CONFRONTO ===============
  async function abrirConfronto(){
    if (!estado.liga || !estado.meuTime){
      alert("Carregue um clube primeiro!");
      return;
    }

    showScreen("confronto");
    confrontoLiga.textContent = estado.liga;

    const times = await apiGet(`${API}/times/${encodeURIComponent(estado.liga)}`);
    limparSelect(confrontoAdvTime);
    times.filter(t => t.nome !== estado.meuTime)
         .forEach(t => addOption(confrontoAdvTime, t.nome, t.nome));

    // reset b√°sico
    document.getElementById("placarLive").textContent = "0 x 0";
    document.getElementById("clockLive").textContent = "00:00 ‚Ä¢ 1¬∫ tempo";
    document.getElementById("sumulaBox").innerHTML = `<div class="muted">Aguardando in√≠cio da partida...</div>`;

    lineupMandante.innerHTML = "";
    lineupVisitante.innerHTML = "";
    pitchMandante.innerHTML = "";
    pitchVisitante.innerHTML = "";
  }

  function voltarClube(){
    showScreen("clube");
  }

  function renderLineup(container, arr){
    container.innerHTML = "";
    arr.forEach(j => {
      const div = document.createElement("div");
      div.className = "li";
      div.textContent = `${j.nome} (${j.posicao}) ‚Ä¢ ${j.forca}`;
      container.appendChild(div);
    });
  }

  function renderPitch(container, arr){
    container.innerHTML = "";
    arr.forEach(j => {
      const d = document.createElement("div");
      d.className = "dot";
      d.title = j.nome;
      d.textContent = j.nome;
      container.appendChild(d);
    });
  }

  function escolherTitulares(elenco){
    const disp = (elenco || []).filter(j => !j.lesao);
    disp.sort((a,b)=> (b.forca||0)-(a.forca||0));
    return disp.slice(0,11);
  }

  async function carregarConfronto(){
    if(!estado.dadosMeuTime) return;

    const adv = confrontoAdvTime.value;
    if(!adv) return;

    btnIniciarLive.disabled = true;
    btnIniciarLive.textContent = "Carregando...";

    try{
      const liga = estado.liga;
      const visitante = await apiGet(`${API}/time/${encodeURIComponent(liga)}/${encodeURIComponent(adv)}`);

      const m = estado.dadosMeuTime;
      const v = visitante;

      nomeMandante.textContent = m.nome;
      nomeVisitante.textContent = v.nome;

      logoMandante.style.display = "block";
      logoVisitante.style.display = "block";
      logoMandante.src = pathLogo(m.logo || "");
      logoVisitante.src = pathLogo(v.logo || "");

      logoMandante.onerror = () => logoMandante.style.display="none";
      logoVisitante.onerror = () => logoVisitante.style.display="none";

      halfTopTitle.textContent = m.nome;
      halfBottomTitle.textContent = v.nome;

      lineupTitleM.textContent = m.nome;
      lineupTitleV.textContent = v.nome;

      const titM = escolherTitulares(m.elenco);
      const titV = escolherTitulares(v.elenco);

      renderLineup(lineupMandante, titM);
      renderLineup(lineupVisitante, titV);

      renderPitch(pitchMandante, titM);
      renderPitch(pitchVisitante, titV);

      document.getElementById("sumulaBox").innerHTML = `<div class="muted">Confronto carregado. Escolha t√°tica e inicie!</div>`;
    } finally{
      btnIniciarLive.disabled = false;
      btnIniciarLive.textContent = "Carregar confronto";
    }
  }

  // =============== EVENTOS ===============
  btnEntrar.addEventListener("click", () => {
    showScreen("clube");
    carregarLigas();
  });

  ligaSelect.addEventListener("change", carregarTimes);
  btnCarregar.addEventListener("click", carregarClube);

  btnIrConfronto.addEventListener("click", abrirConfronto);
  btnVoltarClube.addEventListener("click", voltarClube);
  btnIniciarLive.addEventListener("click", carregarConfronto);

  filtrosPosicao.addEventListener("click", (e) => {
    const btn = e.target.closest("button");
    if (!btn) return;
    estado.filtroPos = btn.dataset.pos || "ALL";
    ativarBotaoFiltro(estado.filtroPos);
    renderElenco();
  });

  buscaJogador.addEventListener("input", () => {
    estado.busca = buscaJogador.value;
    renderElenco();
  });

  btnLimparBusca.addEventListener("click", () => {
    buscaJogador.value = "";
    estado.busca = "";
    renderElenco();
  });

  showScreen("main");
</script>

<!-- ‚úÖ motor da partida 90min em 12s + t√°tica -->
<script type="module" src="./js/confronto_live.js"></script>

</body>
</html>
